<% stuff = typeof stuff !== 'object' ? {} : stuff %>
<div class="pretty-split-pane-frame">
  <div class="split-pane fixed-top" id="panel">
    <div class="split-pane-component" id="top-component">
      <!-- <div class="pretty-split-pane-component-inner"> -->
        <div id="mapid" style=""></div>
      </div>
    <!-- </div> -->
    <div class="split-pane-divider" id="my-divider"></div>
    <div class="split-pane-component" id="bottom-component">
      <!-- <div class="pretty-split-pane-component-inner"> -->
        <div class="card">
          <div class="card-body no-padding">
            <div role="tabpanel">
              <!-- Nav tabs -->
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#title2" aria-controls="title2" role="tab" data-toggle="tab">Info</a></li>
                <li role="presentation"><a href="#widget" aria-controls="widget" role="tab" data-toggle="tab">รายละเอียดแผนที่</a></li>
                <li role="presentation"><a href="#layercontrol" aria-controls="layercontrol" role="tab" data-toggle="tab">ซ่อน/แสดงแผนที่</a></li>
                <!-- <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li>
                <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li> -->
              </ul>

              <!-- Tab panes -->
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="title2">

                </div>
                <div role="tabpanel" class="tab-pane" id="widget">
                  <div class="row">
                    <div class="col-xs-2 col-sm-1">
                      <img src="/img/amphure.PNG" width='20' height="100%"/>
                    </div>
                    <div class="col-xs-6 col-sm-5">
                      <p class="widget">ที่ตั้งอำเภอ</p>
                    </div>
                    <!-- <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(amphureLayer)">
                    </div> -->
                  <!-- </div>
                  <div class="row"> -->
                    <div class="col-xs-2 col-sm-1 ">
                      <img src="/img/tambol.png" width='20' height="100%"/>
                    </div>
                    <div class="col-xs-6 col-sm-5">
                      <p class="widget">ขอบเขตตำบล</p>
                    </div>
                    <!-- <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(tambolLayer)">
                    </div> -->
                  </div>
                  <div class="row">
                    <div class="col-xs-2 col-sm-1">
                      <img src="/img/road.png" width='20' height="100%"/>
                    </div>
                    <div class="col-xs-6 col-sm-5">
                      <p class="widget">ถนนเส้นหลัก</p>
                    </div>
                    <!-- <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(roadLayer)">
                    </div> -->
                    <div class="col-xs-2 col-sm-1">
                      <img src="/img/river.png" width='20' height="100%"/>
                    </div>
                    <div class="col-xs-6 col-sm-5">
                      <p class="widget">แผนการใช้ดิน</p>
                    </div>
                    <!-- <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(roadLayer)">
                    </div> -->
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="layercontrol">
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">ที่ตั้งอำเภอ</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(1)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">ขอบเขตตำบล</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(2)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">ถนนเส้นหลัก</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(3)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">แผนการใช้ดิน</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(9)">
                    </div>
                  </div>
                  <!-- <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">แม่น้ำสายหลัก</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(4)">
                    </div>
                  </div> -->
                  <!-- <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">โครงการชลประทานขนาดเล็ก</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(5)">
                    </div>
                  </div> -->
                  <!-- <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">โครงการชลประทานขนาดกลาง</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(6)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">โครงการชลประทานขนาดใหญ่</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(7)">
                    </div>
                  </div> -->
                  <!-- <div class="row">
                    <div class="col-xs-6 col-sm-6 col-xs-offset-1 col-sm-offset-2">
                      <p class="widget">พื้นที่โครงการชลประทาน</p>
                    </div>
                    <div class="col-xs-4 col-sm-2 layer">
                      <input type="checkbox" class="toggle-checkbox"  checked onchange="changeLayer(8)">
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      <!-- </div> -->
    </div>
  </div>
</div>
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="/css/leaflet.utfgrid.js"></script>
<!-- <script src="http://cdn.leafletjs.com/leaflet/TileLayer.GeoJSON.js"></script> -->
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script>
var height = window.screen.height;
document.getElementById('mapid').style.height = height*3/4+"px";
document.getElementById('top-component').style.height = height+"px";
document.getElementById('panel').style.height = height*4/5+"px";
  <% if (stuff.provice == "Chanthaburi") { %>
      var center = [12.66446, 102.07947];
  <% } else if(stuff.provice == "Udonthani") { %>
      var center = [17.3948, 102.8099];
  <% } else if(stuff.provice == "PhraNaKhonSriAyutthaya") { %>
      var center = [14.35487, 100.56198];
  <% } else if(stuff.provice == "Nakhonrachasrima") { %>
      var center = [15.04427, 102.12616];
  <% } else if(stuff.provice == "Ubonrachathani") { %>
      var center = [15.22721, 104.86038];
  <% } else if(stuff.provice == "ChiangMai") { %>
      var center = [18.80232, 98.9827];
  <% } else if(stuff.provice == "Phayao") { %>
      var center = [19.20613, 100.20218];
  <% } else if(stuff.provice == "KamphaengPhet") { %>
      var center = [16.46901, 99.52515];
  <% } else if(stuff.provice == "Ratchaburi") { %>
      var center = [13.54721, 99.83276];
  <% } else if(stuff.provice == "Narathiwat") { %>
      var center = [6.26479, 101.75812];
  <% } else if(stuff.provice == "SuratThani") { %>
      var center = [9.11837, 99.28619];
  <% } else if(stuff.provice == "Trang") { %>
      var center = [7.56535, 99.60686];
  <% } %>
    // var center = [[12.61115, 102.10389]];
    var map = L.map('mapid').setView(center, 10);
    // var mymap = L.map('mapid').setView([51.505, -0.09], 13);

    var googleRoadLayerURL    = "http://mt.google.com/vt/lyrs=m&z={z}&x={x}&y={y}&hl=th";
    var googleSatLayerURL     = "http://mt.google.com/vt/lyrs=s&z={z}&x={x}&y={y}&hl=th";
    var googleHybridLayerURL  = "http://mt.google.com/vt/lyrs=y&z={z}&x={x}&y={y}&hl=th";

    var tambolLayerUrl_old    = "http://irrigationstructure.rid.go.th:8888/v2/tambol/{z}/{x}/{y}.png";
    var tambolLayerUrl        = "http://49.50.235.62:8888/v2/agri_tile_tambol/{z}/{x}/{y}.png";
    var amphureLayerUrl       = "http://49.50.235.62:8888/v2/agri_tile_amphoe/{z}/{x}/{y}.png";
    var roadLayerUrl          = "http://49.50.235.62:8888/v2/agri_tile_road/{z}/{x}/{y}.png";
    var pwaLayerUrl           = "http://irrigationstructure.rid.go.th:8888/v2/pwa/{z}/{x}/{y}.png";

    var googleRoadLayer = new L.TileLayer(googleRoadLayerURL, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "google",
      detectRetina  : false
    });

    map.addLayer(googleRoadLayer);

    var googleSatLayer = new L.TileLayer(googleSatLayerURL, {
      maxZoom: 22,
      minZoom: 4,
      // errorTileUrl: blank_img,
      attribution: "google",
      detectRetina: false
    });

    var googleHybridLayer = new L.TileLayer(googleHybridLayerURL, {
      maxZoom: 22,
      minZoom: 4,
      // errorTileUrl: blank_img,
      attribution: "google",
      detectRetina: false
    });


    var tambolLayer = new L.TileLayer(tambolLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "ขอบเขตตำบล",
      detectRetina  : false
    });

    map.addLayer(tambolLayer);

    var amphureLayer = new L.TileLayer(amphureLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "ขอบเขตอำเภอ",
      detectRetina  : false
    });

    map.addLayer(amphureLayer);

    var roadLayer = new L.TileLayer(roadLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "ถนน",
      detectRetina  : false
    });

    map.addLayer(roadLayer);

    /*===== baseLayers Group =====*/
    var baseLayers = {
      'Google Road'   : googleRoadLayer,
      'Google Sat': googleSatLayer,
      'Google Hybrid': googleHybridLayer
    };

    var overlays = {
      'ขอบเขตอำเภอ'       : amphureLayer,
      'ขอบเขตตำบล'        : tambolLayer,
      'ถนน'          : roadLayer,
      // 'Provincial Waterwork Authority'   : pwaLayer,
    };

    L.control.layers(baseLayers, overlays).addTo(map);

    function changeLayer(layer){
      if(layer === 1){
        if(map.hasLayer(amphureLayer)){
          map.removeLayer(amphureLayer);
        }else{
          map.addLayer(amphureLayer);
        }
      }else if(layer === 2){
        if(map.hasLayer(tambolLayer)){
          map.removeLayer(tambolLayer);
        }else{
          map.addLayer(tambolLayer);
        }
      }else if(layer === 3){
        if(map.hasLayer(roadLayer)){
          map.removeLayer(roadLayer);
        }else{
          map.addLayer(roadLayer);
        }
      }else if(layer === 4){
        if(map.hasLayer(riverLayer)){
          map.removeLayer(riverLayer);
          map.removeLayer(riverGridUrl);
        }else{
          map.addLayer(riverLayer);
          map.addLayer(riverGridUrl);
        }
      }else if(layer === 5){
        if(map.hasLayer(irri_sLayer)){
          map.removeLayer(irri_sLayer);
          map.removeLayer(irri_sGridUrl);
        }else{
          map.addLayer(irri_sLayer);
          map.addLayer(irri_sGridUrl);
        }
      }else if(layer === 6){
        // if(map.hasLayer(tambolLayer)){
        //   map.removeLayer(tambolLayer);
        // }else{
        //   map.addLayer(tambolLayer);
        // }
      }else if(layer === 7){
        // if(map.hasLayer(tambolLayer)){
        //   map.removeLayer(tambolLayer);
        // }else{
        //   map.addLayer(tambolLayer);
        // }
      }else if(layer === 8){
        if(map.hasLayer(irrLayer)){
          map.removeLayer(irrLayer);
          map.removeLayer(irrGridUrl);
        }else{
          map.addLayer(irrLayer);
          map.addLayer(irrGridUrl);
        }
      }else if(layer === 9){
        //การใช้ดิน
        // if(map.hasLayer(irrLayer)){
        //   map.removeLayer(irrLayer);
        //   map.removeLayer(irrGridUrl);
        // }else{
        //   map.addLayer(irrLayer);
        //   map.addLayer(irrGridUrl);
        // }
      }
    }
    // var popup = L.popup();
    //
    // function onMapClick(e) {
    //   popup
    //   .setLatLng(e.latlng)
    //   .setContent("You clicked the map at " + e.latlng.toString())
    //   .openOn(map);
    // }
    //
    // map.on('click', onMapClick);

    </script>
