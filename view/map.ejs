<% stuff = typeof stuff !== 'object' ? {} : stuff %>
<div id="mapid" style=""></div>
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script>
var height = window.screen.height;
console.log(height*2/3);
document.getElementById('mapid').style.height = height*2/3+"px";
<% if (stuff.provice == "Chanthaburi") { %>
  var center = [12.91088, 102.17285];
  <% } else if(stuff.provice == "Uttaradit") { %>
    var center = [17.69636, 100.46448];
    <% } %>
    // var center = [[12.61115, 102.10389]];
    var map = L.map('mapid').setView(center, 10);
    // var mymap = L.map('mapid').setView([51.505, -0.09], 13);

    var googleRoadLayerURL    = "http://mt.google.com/vt/lyrs=m&z={z}&x={x}&y={y}&hl=th";
    var googleSatLayerURL     = "http://mt.google.com/vt/lyrs=s&z={z}&x={x}&y={y}&hl=th";
    var googleHybridLayerURL  = "http://mt.google.com/vt/lyrs=y&z={z}&x={x}&y={y}&hl=th";

    var tambolLayerUrl_old    = "http://irrigationstructure.rid.go.th:8888/v2/tambol/{z}/{x}/{y}.png";
    var tambolLayerUrl        = "http://49.50.235.62:8888/v2/agri_tile_tambol/{z}/{x}/{y}.png";
    var amphureLayerUrl       = "http://49.50.235.62:8888/v2/agri_tile_amphoe/{z}/{x}/{y}.png";
    var pwaLayerUrl           = "http://irrigationstructure.rid.go.th:8888/v2/pwa/{z}/{x}/{y}.png";

    var googleRoadLayer = new L.TileLayer(googleRoadLayerURL, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "google",
      detectRetina  : false
    });

    map.addLayer(googleRoadLayer);

    var googleSatLayer = new L.TileLayer(googleSatLayerURL, {
      maxZoom: 22,
      minZoom: 4,
      // errorTileUrl: blank_img,
      attribution: "google",
      detectRetina: false
    });

    var googleHybridLayer = new L.TileLayer(googleHybridLayerURL, {
      maxZoom: 22,
      minZoom: 4,
      // errorTileUrl: blank_img,
      attribution: "google",
      detectRetina: false
    });


    var tambolLayer = new L.TileLayer(tambolLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "tambol",
      detectRetina  : false
    });

    // map.addLayer(tambolLayer);

    var amphureLayer = new L.TileLayer(amphureLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "tambol",
      detectRetina  : false
    });

    map.addLayer(amphureLayer);

    var pwaLayer = new L.TileLayer(pwaLayerUrl, {
      maxZoom       : 22,
      minZoom       : 4,
      // errorTileUrl  : blank_img,
      attribution   : "pwa",
      detectRetina  : false
    });

    // map.addLayer(pwaLayer);

    /*===== baseLayers Group =====*/
    var baseLayers = {
      'Google Road'   : googleRoadLayer,
      'Google Sat': googleSatLayer,
      'Google Hybrid': googleHybridLayer
    };

    var overlays = {
      'Tambol'        : tambolLayer,
      'Amphure'        : amphureLayer,
      // 'Provincial Waterwork Authority'   : pwaLayer,
    };

    L.control.layers(baseLayers, overlays).addTo(map);

    var popup = L.popup();

    function onMapClick(e) {
      popup
      .setLatLng(e.latlng)
      .setContent("You clicked the map at " + e.latlng.toString())
      .openOn(map);
    }

    map.on('click', onMapClick);

    </script>
